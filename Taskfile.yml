# https://taskfile.dev

version: '3'

vars:
  count: 10

tasks:
  bench21:
    cmds:
      - mkdir results || true
      - go test -bench=. -benchmem -count={{.count}} | testanalyzer > results/bench_21.txt

  bench22:
    env:
      GOEXPERIMENT: loopvar
    cmds:
      - mkdir results || true
      - go test -bench=. -benchmem -count={{.count}} | testanalyzer > results/bench_22.txt

  run21:
    cmds:
      - go run cmd.go

  run22:
    env:
      GOEXPERIMENT: loopvar
    cmds:
      - go run cmd.go